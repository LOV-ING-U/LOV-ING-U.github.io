---
title: "[CS:APP Chapter 10] System level I/O"
last_modified_at: 2025-09-21
categories:
  - System Programming
comments: true
use_math: true
---  
  
CS:APP 10장을 읽고 작성한 핵심 내용이다.  

## Unix I/O  
모든 file은 byte들의 연속으로 간주한다. 또한 regular file부터 device, socket 등등 모든 것을 file로 간주하기에, kernel은 simple한 I/O interface를 제공할 수 있다.  
  
## Types of File
 - **Regular File** : 일반 파일들은 어떠한 데이터도 담을 수 있다. 흔히 **text file**로 부르는 file은 단지 모든 character가 ASCII(or Unicode)로 이루어진 것으로 간주되며, 이외의 file은 **binary file**로 분류된다. kernel에게는 다 똑같은 regular file이다.  
 - **Directory File** : Directory 조차 file로 간주된다. 여기서 directory란, **filename**과 **inode**를 mapping하는 directory entry들로 구성된 file을 말한다. 이처럼 특정 file에 대해 mapping 정보를 가지고 있는 것을 **link**라고 하며, **hard link**와 **soft link**로 구분된다.  
 - **Socket** : 서로 다른 프로세스가 communicate하기 위한 file이다. 해당 챕터에서는 핵심적으로 다루지는 않는다.
 - **Others** : **named pipes**, **block devices** 등이 있다.  
   
Kernel은 하나의 거대한 tree(= single directory hierarchy)로 이 file들을 전부 다룬다. 이 tree의 root, 즉 시작 directory는 **root directory(="/")**이다.  
  
각 process는 현재 자신이 속해있는 directory인 current working directory, 즉 이 tree에서 본인이 속한 위치에서 작업을 수행하며, cmd에서 cd와 같은 명령어로 이를 수정할 수 있다.  
  
이러한 single directory hierarchy 구조에서 location은 **pathname**에 의해 특정되는데, pathname은 filename과 /(slash)로 구성된 string이다. 2가지 유형이 있다.  
- **absolute pathname** : 절대경로라고도 하며, "/"로 시작하여 root로부터의 path를 나타낸다.  
- **relative pathname** : 상대경로라고도 하며, filename으로 시작하여 current working directory에서부터의 경로를 나타낸다.  
  
## Open, Close, Read, Write Files  
이러한 file들을 다룰 수 있는, kernel에서 제공하는 system call들이 있다. 사용자는 device에 직접 접근이 불가하므로, kernel의 system call을 통해 접근한다.  
  
# Open  
syntax는 아래와 같다.
```C
  int open(char *filename, int flags, mode_t mode)
  // return new fd number if success, -1 if fail
```  
  
추가 작업중...