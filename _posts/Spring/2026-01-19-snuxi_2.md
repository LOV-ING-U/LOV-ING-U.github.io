---
title: "SNUXI 개발일지 - 2 [CORS와 보안]"
last_modified_at: 2026-01-19
categories:
  - SNUXI
---
  
프론트 분들과 협업하다가 만난 CORS에 대해 정리를 해보고자 한다.  
  
## SOP (Same-Origin Policy)  
같은 origin, 즉 같은 출처에서의 요청만 접근할 수 있도록 하는 원칙이다.  
여기서 origin이란, Protocol + domain(IP) + Port Number의 조합이다. 예를 들어, https://google.com:1234/... 에서 https가 프로토콜, google.com이 도메인, 1234가 포트번호 이런 식이다.  
  
이러한 원칙이 존재하는 이유는, 악의적인 요청을 차단하기 위함이다.  
예를 들어, 어떤 사용자가 민감한 개인정보가 포함된 사이트에 접속한 후에 악의적인 사이트에 실수로 접속했다고 해보자. 그렇다면 다음과 같은 일이 발생할 수 있다.  
  
(사용자) ......... (개인정보.com) ......... (나쁜.com)  
   (1) ---------> 접속(로그인 등)  
   (2) <--------- 사용자 브라우저가 쿠키 저장  
   (3) ----------------------------------> 실수로 나쁜.com 접속
   (4) <---------------------------------- 이 기회를 놓치지 않고 개인정보 가져오기 요청  
   (5) ----------> 쿠키를 포함해서 요청, 악의적인 요청임에도 정상 응답을 반환, 개인정보 유출  
     
SOP를 사용한다면, (5)번에서 해당 요청을 막을 수 있다.  
구체적으로, (4)번에서 나쁜.com에 의해 HTTP 요청 스크립트가 실행된 후, 사용자 브라우저는 개인정보.com으로 요청을 보낸다. 이때 쿠키가 자동 포함되므로 개인정보.com은 사용자가 맞다고 판단, 응답을 사용자 브라우저로 정상 반환한다.  
  
이때 SOP가 한건 하게된다. '같은 출처'인 경우만 허용한다는 것인데, 좀 더 자세히는 '현재 주소창에 있는 host'와 '데이터를 요청하기 위해 기입한 host'의 origin이 같은지를 검사한다.  
  
현재 주소창에 있는 host = 나쁜.com이며, 데이터 요청 시 기입한 host = 개인정보.com이므로, 둘의 도메인부터 다르기 때문에 origin이 다르다고 판단, 브라우저는 개인정보.com으로부터 받은 응답을 나쁜.com에게 주지 않고 에러만 던진다.  
  
개념적으로 생각해보면, 개인정보에 접근하려면 당연히 개인정보를 취급하는 개인정보.com 주소창에서 http 요청을 수행해야 할 것이므로 origin 비교 기준은 타당하다.  
  
그런데 만약 개발을 하고 있는 입장에서, 프론트 origin도 있고 백엔드 origin도 있는데 그 둘이 다르면 API를 사용하지 못하게 된다. 따라서, 이를 완화하기 위해 등장한 것이 CORS이다.  
    
## CORS(Cross-Origin Resource Sharing)  
SOP에서 예외를 허용하도록(다른 출처에서의 요청의 접근을 허용) 하는 메커니즘이다. 서버가 허용하고 싶은 특정 출처를 클라이언트에게 알려주면 된다. 만약 서버가 허용하지 않은 출처로부터 요청했다면 브라우저에서 CORS 에러를 띄우게 된다.  
  
