---
title: "Project : RainMind 개발일지 - 12 [1번째 최적화 수행 기록(수치화)]"
last_modified_at: 2026-02-16
# date: 2026-01-23 01:00:00 +0900
categories:
  - Rainmind
---  
  
이전 글에서 사용한 스크립트와 PromQL 쿼리, 데이터 수치화를 기록한다.  
  
1) **회원가입 기능**  
- **문제 제시**: 수백명의 유저가 지속적으로 회원가입을 수행할 때 처리 속도가 낮아지는 병목 현상 발생.  
- **해결**: 해결을 위해 100명의 유저가 3분동안 지속적으로 회원가입 로직을 수행하는 스크립트를 작성.  
- **사용 스크립트**:  
```javascript
import http from 'k6/http';
import { check, sleep } from 'k6';
import { uuidv4 } from 'https://jslib.k6.io/k6-utils/1.4.0/index.js';
import { Counter } from 'k6/metrics';

export const options = {
    duration: '3m',
    vus: 100
};

const BASE_URL = __ENV.BASE_URL;
const created = new Counter('created_201');
const dup = new Counter('dup_409');

export default function() {
    const nickname = `user_${uuidv4().substring(0, 8)}_${__VU}_${__ITER}`;
    const res = http.post(
        `${BASE_URL}/v1/auth/user/register`,
        JSON.stringify({
            nickname,
            password: 'password12345678',
            region_name: 'Seoul'
        }),
        {
            headers: {
                'Content-Type': 'application/json'
            }
        }
    );

    check(res, {
        'register, or duplicate': (r) => r.status == 201 || r.status == 409
    });

    if(res.status == 201) created.add(1);
    if(res.status == 409) dup.add(1);
}
```  
- **측정 지표**: 평균 응답시간, p(90) / p(95) / max 응답시간, RPS(Request Per Second)  
- **결과**:  
  
| avg | p(90) | p(95) | max | RPS(req / s) |   
| --- | ----- | ----- | --- | ------------ |  
| 3.68s | 3.91s | 3.96s | 6.14s | 27.044926 |  
  
