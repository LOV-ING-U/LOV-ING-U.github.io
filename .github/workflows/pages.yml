name: Build and Deploy to Pages
on:
push:
branches: ["main", "master"]
workflow_dispatch:

permissions:
contents: read
pages: write
id-token: write

jobs:
build:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
- uses: ruby/setup-ruby@v1
with:
ruby-version: '3.2'
bundler-cache: true
- run: bundle lock --add-platform x86_64-linux || true
- run: bundle install
- run: bundle exec jekyll build --trace
- uses: actions/upload-pages-artifact@v3
with:
path: ./_site
deploy:
needs: build
runs-on: ubuntu-latest
environment: { name : github-pages }
steps:
- uses: actions/deploy-pages@v4
